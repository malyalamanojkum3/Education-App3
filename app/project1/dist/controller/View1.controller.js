sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],(e,s)=>{"use strict";return e.extend("project1.controller.View1",{onInit(){sap.ui.core.BusyIndicator.show(0);sap.ui.core.BusyIndicator.hide()},OnLoginbutton:function(){var e=this.byId("emailinput").getValue();var r=this.byId("passinput").getValue();if(!e||!r){s.show("Please enter both email and password.");return}var i=this.getView().getModel("mainModel");var t=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("email",sap.ui.model.FilterOperator.EQ,e),new sap.ui.model.Filter("password",sap.ui.model.FilterOperator.EQ,r)],and:true});i.read("/user",{filters:[t],success:function(r){if(r.results&&r.results.length>0){s.show("Login successful for: "+e);var i=sap.ui.core.UIComponent.getRouterFor(this);i.navTo("dashboard")}else{s.show("Invalid username or password.")}}.bind(this),error:function(e){s.show("Error during login. Please try again.");console.error(e)}})},onTogglePasswordVisibility:function(){var e=this.byId("passinput");var s=e.getType()==="Password";e.setType(s?"Text":"Password")},onTogglePasswordVisibilityreg:function(){var e=this.byId("regpass");var s=e.getType()==="Password";e.setType(s?"Text":"Password")},onSignup:function(){this.byId("loginfields").setVisible(false);this.byId("signUpFields").setVisible(true)},onLogin:function(){this.byId("signUpFields").setVisible(false);this.byId("loginfields").setVisible(true)},onRegister:function(){var e=this.getView();var r=this.byId("regusername").getValue();var i=this.byId("regmobile").getValue();var t=this.byId("regemail").getValue();var o=this.byId("regpass").getValue();var a=this.byId("regpass1").getValue();if(!r||!i||!t||!o||!a){s.show("Please fill in all fields.");return}var n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!n.test(t)){s.show("Please enter a valid email address.");return}var l=/^\d{10}$/;if(!l.test(i)){s.show("Please enter a valid 10-digit mobile number.");return}var u=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/;if(!u.test(o)){s.show("Password must be at least 6 characters long and include both letters and numbers.");return}if(o!==a){s.show("Passwords do not match.");return}var d=this.getView().getModel("mainModel");var g={email:t,password:o,username:r,mobileNumber:i,userRole:"Admin"};d.read("/user",{filters:[new sap.ui.model.Filter("email",sap.ui.model.FilterOperator.EQ,t)],success:function(e){if(e.results&&e.results.length>0){s.show("User already exists. Please login.")}else{d.create("/user",g,{success:function(){s.show("Registration successful!");this.onLogin()}.bind(this),error:function(e){s.show("Error during registration.");console.error("Registration error:",e)}})}}.bind(this),error:function(e){s.show("Error checking existing users.");console.error("User check error:",e)}})}})});
//# sourceMappingURL=View1.controller.js.map