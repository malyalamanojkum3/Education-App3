sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/odata/v2/ODataModel"],function(e,t,a){"use strict";return e.extend("project1.controller.LoanStatusDetails",{onInit:function(){var e=new t({displayValue:"",percentValue:0,state:"None"});this.getView().setModel(e,"progressModel");var a=sap.ui.core.UIComponent.getRouterFor(this);a.getRoute("LoanStatusDetails").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){var t=e.getParameter("arguments").customerId;this._loadCustomerDetails(t)},_loadCustomerDetails:function(e){var t=this.getView().getModel("mainModel");t.callFunction("/trackLoan",{method:"GET",urlParameters:{Id:e},success:function(e){var t=e&&e.results&&e.results[0]?e.results[0]:{};var a=new sap.ui.model.json.JSONModel(t);this.getView().setModel(a,"loanDetailModel");this.getView().setBindingContext(a.createBindingContext("/"),"loanDetailModel");this._onDataReceived()}.bind(this),error:function(e){sap.m.MessageToast.show("Failed to load loan details.")}})},_onDataReceived:function(){var e=this.getView().getModel("loanDetailModel");var t=e?e.getData():{};var a=t.loanStatus;var o=this.getView().getModel("progressModel");switch(a){case"Submitted":o.setProperty("/displayValue","");o.setProperty("/percentValue",33);o.setProperty("/state","None");break;case"Pending":o.setProperty("/displayValue","");o.setProperty("/percentValue",66);o.setProperty("/state","Warning");break;case"Approved":o.setProperty("/displayValue","");o.setProperty("/percentValue",100);o.setProperty("/state","Success");break;case"Rejected":o.setProperty("/displayValue","");o.setProperty("/percentValue",100);o.setProperty("/state","Error");break;default:o.setProperty("/displayValue",a);o.setProperty("/percentValue",0);o.setProperty("/state","None");break}},onNavBack:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("LoanStatusPage")}})});
//# sourceMappingURL=LoanStatusDetails.controller.js.map