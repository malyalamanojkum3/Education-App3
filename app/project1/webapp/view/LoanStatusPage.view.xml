<mvc:View controllerName="project1.controller.LoanStatusPage"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
 
    <Page id="LoanStatusPage" showHeader="true" enableScrolling="true" class="customPage">
    <customHeader>
      <Bar design="Header" class="box">
       <contentLeft>
       <Button id="homels" text="Home" press="onHome" class="mybuttonspacing"></Button>
      </contentLeft>
        <contentMiddle>
        <Title text="Education Loan" textAlign="Center" class=" headerTitleCentered" ></Title>
        </contentMiddle>
        <contentRight>
          <Button id="logoutLS" text="Logout" press="onLogout" class="mybuttonspacing"/>
        </contentRight>
      </Bar>
    </customHeader>

    <content>
        <Bar>
            <contentLeft>
                <Text text="My Loan Applications" class="subHeader" />
            </contentLeft>
            <contentMiddle>
                <Button text="Refresh" icon="sap-icon://refresh" press="onRefresh" type="Transparent"/>
            </contentMiddle>
            <contentRight>
                <Text text="Welcome, {loansModel>/userInfo/name}" class="sapUiSmallMargin"/>
            </contentRight>
        </Bar>
        
        <VBox class="sapUiMediumMargin">
            <!-- User Info Panel -->
            <Panel headerText="Loan Applications for {loansModel>/userInfo/name}" class="sapUiResponsiveMargin" expandable="false">
                <content>
                    <Text text="Email: {loansModel>/userInfo/email}" class="sapUiSmallMarginBottom"/>
                    <Text text="Click on any loan ID below to view detailed information" class="sapUiTinyText"/>
                </content>
            </Panel>
            
            <!-- Loans List -->
            <List 
                id="loansList"
                items="{loansModel>/loans}"
                noDataText="No loan applications found for your account. Apply for a loan from the dashboard."
                mode="None"
                itemPress="onLoanPress"
                class="sapUiResponsiveMargin">
                <StandardListItem
                    title="Loan ID: {loansModel>loanId}"
                    description="Applicant: {loansModel>applicantName} | Amount: â‚¹{loansModel>loanAmount}"
                    info="{loansModel>loanStatus}"
                    infoState="{parts: ['loansModel>loanStatus'], formatter: '.formatStatusState'}"
                    type="Navigation"
                    press="onLoanPress"
                    class="sapUiMediumMarginBottom">
                    <customData>
                        <core:CustomData key="loanId" value="{loansModel>loanId}"/>
                    </customData>
                </StandardListItem>
            </List>
        </VBox>
    </content>
    </Page>
 
</mvc:View>